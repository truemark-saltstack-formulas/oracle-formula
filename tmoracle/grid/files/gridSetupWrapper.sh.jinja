#!/usr/bin/env bash

RESPONSE_FILE="${1}"

if [[ -z "${RESPONSE_FILE}" ]]; then
  echo "Response file is required as an argument to this script"
  exit 1
fi

USER=$(whoami)

if [[ "root" != "${USER}" ]; then
  echo "Script must be run as the root user"
  exit 1
fi

DIR="$(dirname $0)"
cd ${DIR}
DIR=$(pwd)

su - oracle -c "cd ${DIR}; ./gridSetup.sh -waitForCompletion -silent -responseFile ${RESPONSE_FILE}; exit $?"

RETCODE="$?"

if [ "${RETCODE}" == 1 ]; then
  exit 1
else
  exit 0
fi

